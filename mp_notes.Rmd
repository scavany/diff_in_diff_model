---
title: "Difference in differences notes"
author: "Mark Pritchard"
date: "2023-01-31"
output: pdf_document
fig_width: 6 
fig_height: 3
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = TRUE)

library(adaptivetau)
library(deSolve)
library(glue)
library(purrr)
library(this.path)
library(tidyverse)

codepath <- this.path::here()

source(glue(codepath, "/diff_in_diff_fn.R"))
```

## asdf

We are trying to find 

## Notes of how we are doing this 

asdf

## Scenario 1. Two settings with same parameters but different initial conditions

The outputs have the same population size and different proportions initially infected. Beta is kept constant over time.
```{r model1}
times_1 <- seq(0, 360, 1)
p_1 <- c(
  beta.0 = 1 / 15,
  gam    = 1 / 30,
  amp    = 0       # i.e. beta is constant over time
)
u0_1a <- c(S = 899, I =  1, R = 100)
u0_1b <- c(S = 890, I = 10, R = 100)

output_1a <- sir.model(times_1, u0_1a, p_1)
output_1b <- sir.model(times_1, u0_1b, p_1)
```

```{r model1_did, echo = FALSE}
did_1 <- diffindiff(output_1a, output_1b)
logdid_1 <- logdiffindiff(output_1a, output_1b)
```

### Difference in point prevalence

Plot the difference in difference of the point prevalences.

```{r plots1_1, echo = FALSE}
plotdid(output_1a$I, output_1b$I, did_1$I, "I")
```

Repeat this plot on a log scale.

```{r plots1_2, echo = FALSE}
plotdid(log(output_1a$I), log(output_1b$I), logdid_1$I, "log(I)", vline = 140)
```

Even during the initial exponential growth part of the outbreak but not too great a difference before model 2 starts to decline.

### Difference in basic reproduction number (R0)

```{r plots1_3, echo = FALSE}
plotdid(output_1a$R0, output_1b$R0, did_1$R0, "R0")
```

### Difference in effective reproduction number (Rt)

```{r plots1_4, echo = FALSE}
plotdid(output_1a$Rt, output_1b$Rt, did_1$Rt, "Rt")
```

The change in Rt on a log scale 

```{r plots1_5, echo = FALSE}
plotdid(log(output_1a$Rt), log(output_1b$Rt), logdid_1$Rt, "log(Rt)")
```


```{r plots1_6}
### Difference in differences of R0 
plotdid(output_1a$R0, output_1b$R0, did_1$R0, "R0")

### Difference in differences of Rt
plotdid(output_1a$Rt, output_1b$Rt, did_1$Rt, "Rt")
plotdid(log(output_1a$Rt), log(output_1b$Rt), logdid_1$Rt, "log(Rt)")

### Difference in differences of cumulative incidence 
plotdid(output_1a$cumincidence, output_1b$cumincidence, did_1$cumincidence, 
  "Cumulative incidence")
plotdid(log(output_1a$cumincidence), log(output_1b$cumincidence), logdid_1$cumincidence, 
  "log(Cumulative incidence)")

### Difference in differences of incident cases
plotdid(output_1a$incidentcases, output_1b$incidentcases, did_1$incidentcases, 
  "Incident cases")
plotdid(log(output_1a$incidentcases), log(output_1b$incidentcases), logdid_1$incidentcases, 
  "log(Incident cases)")

## difference in difference with baseline set to same point prevalence 
outputi10_1a <- clipdf(output_1a)
outputi10_1b <- clipdf(output_1b)
didi10_1 <- diffindiff(outputi10_1a, outputi10_1b)
logdidi10_1 <- logdiffindiff(outputi10_1a, outputi10_1b)

### Difference in differences of point prevalence
plotdid(outputi10_1a$I, outputi10_1b$I, didi10_1$I, "I")
plotdid(log(outputi10_1a$I), log(outputi10_1b$I), logdidi10_1$I, "log(I)")

### Difference in differences of R0 
plotdid(outputi10_1a$R0, outputi10_1b$R0, didi10_1$R0, "R0")

### Difference in differences of Rt
plotdid(outputi10_1a$Rt, outputi10_1b$Rt, didi10_1$Rt, "Rt")
plotdid(log(outputi10_1a$Rt), log(outputi10_1b$Rt), logdidi10_1$Rt, "log(Rt)")

### Difference in differences of cumulative incidence 
plotdid(outputi10_1a$cumincidence, outputi10_1b$cumincidence, didi10_1$cumincidence, 
        "Cumulative incidence")
plotdid(log(outputi10_1a$cumincidence), log(outputi10_1b$cumincidence), logdidi10_1$cumincidence, 
        "log(Cumulative incidence)")

### Difference in differences of incident cases
plotdid(outputi10_1a$incidentcases, outputi10_1b$incidentcases, didi10_1$incidentcases, 
        "Incident cases")
plotdid(log(outputi10_1a$incidentcases), log(outputi10_1b$incidentcases), logdidi10_1$incidentcases, 
        "log(Incident cases)")
```


```{r plotsx_1}
## Scenario 2: Same parameters but different initial conditions (different population 
# size and same proportions initially infected)

times_2 <- seq(0, 360, 1)
p_2 <- c(
  beta.0 = 1 / 15,
  gam = 1 / 30,
  amp = 0 # i.e. beta is constant over time
)
u0_2a <- c(S =  898, I = 2, R = 100)
u0_2b <- c(S = 1347, I = 3, R = 150)

output_2a <- sir.model(times_2, u0_2a, p_2)
output_2b <- sir.model(times_2, u0_2b, p_2)
did_2 <- diffindiff(output_2a, output_2b)
logdid_2 <- logdiffindiff(output_2a, output_2b)

### Difference in differences of point prevalence
plotdid(output_2a$I, output_2b$I, did_2$I, "I")
plotdid(log(output_2a$I), log(output_2b$I), logdid_2$I, "log(I)")

### Difference in differences of R0 
plotdid(output_2a$R0, output_2b$R0, did_2$R0, "R0")

### Difference in differences of Rt
plotdid(output_2a$Rt, output_2b$Rt, did_2$Rt, "Rt")
plotdid(log(output_2a$Rt), log(output_2b$Rt), logdid_2$Rt, "log(Rt)")

### Difference in differences of cumulative incidence 
plotdid(output_2a$cumincidence, output_2b$cumincidence, did_2$cumincidence, 
  "Cumulative incidence")
plotdid(log(output_2a$cumincidence), log(output_2b$cumincidence), logdid_2$cumincidence, 
  "log(Cumulative incidence)")

### Difference in differences of incident cases
plotdid(output_2a$incidentcases, output_2b$incidentcases, did_2$incidentcases, 
  "Incident cases")
plotdid(log(output_2a$incidentcases), log(output_2b$incidentcases), logdid_2$incidentcases, 
  "log(Incident cases)")

## difference in difference with baseline set to same point prevalence 
outputi10_2a <- clipdf(output_2a)
outputi10_2b <- clipdf(output_2b)
didi10_2 <- diffindiff(outputi10_2a, outputi10_2b)
logdidi10_2 <- logdiffindiff(outputi10_2a, outputi10_2b)

### Difference in differences of point prevalence
plotdid(outputi10_2a$I, outputi10_2b$I, didi10_2$I, "I")
plotdid(log(outputi10_2a$I), log(outputi10_2b$I), logdidi10_2$I, "log(I)")

### Difference in differences of R0 
plotdid(outputi10_2a$R0, outputi10_2b$R0, didi10_2$R0, "R0")

### Difference in differences of Rt
plotdid(outputi10_2a$Rt, outputi10_2b$Rt, didi10_2$Rt, "Rt")
plotdid(log(outputi10_2a$Rt), log(outputi10_2b$Rt), logdidi10_2$Rt, "log(Rt)")

### Difference in differences of cumulative incidence 
plotdid(outputi10_2a$cumincidence, outputi10_2b$cumincidence, didi10_2$cumincidence, 
        "Cumulative incidence")
plotdid(log(outputi10_2a$cumincidence), log(outputi10_2b$cumincidence), logdidi10_2$cumincidence, 
        "log(Cumulative incidence)")

### Difference in differences of incident cases
plotdid(outputi10_2a$incidentcases, outputi10_2b$incidentcases, didi10_2$incidentcases, 
        "Incident cases")
plotdid(log(outputi10_2a$incidentcases), log(outputi10_2b$incidentcases), logdidi10_2$incidentcases, 
        "log(Incident cases)")


## Scenario 3: Same parameters, time-varying beta, but different initial conditions 
# (same population size and different proportions infected)

times_3 <- seq(0, 360, 1)
p_3 <- c(
  beta.0 = 1 / 15,
  gam = 1 / 30,
  amp = .3 / 15
)
u0_3a <- c(S = 899, I =  1, R = 100)
u0_3b <- c(S = 890, I = 10, R = 100)

output_3a <- sir.model(times_3, u0_3a, p_3)
output_3b <- sir.model(times_3, u0_3b, p_3)
did_3 <- diffindiff(output_3a, output_3b)
logdid_3 <- logdiffindiff(output_3a, output_3b)

### Difference in differences of point prevalence
plotdid(output_3a$I, output_3b$I, did_3$I, "I")
plotdid(log(output_3a$I), log(output_3b$I), logdid_3$I, "log(I)")

### Difference in differences of R0 
plotdid(output_3a$R0, output_3b$R0, did_3$R0, "R0")

### Difference in differences of Rt
plotdid(output_3a$Rt, output_3b$Rt, did_3$Rt, "Rt")
plotdid(log(output_3a$Rt), log(output_3b$Rt), logdid_3$Rt, "log(Rt)")

### Difference in differences of cumulative incidence 
plotdid(output_3a$cumincidence, output_3b$cumincidence, did_3$cumincidence, 
  "Cumulative incidence")
plotdid(log(output_3a$cumincidence), log(output_3b$cumincidence), logdid_3$cumincidence, 
  "log(Cumulative incidence)")

### Difference in differences of incident cases
plotdid(output_3a$incidentcases, output_3b$incidentcases, did_3$incidentcases, 
  "Incident cases")
plotdid(log(output_3a$incidentcases), log(output_3b$incidentcases), logdid_3$incidentcases, 
  "log(Incident cases)")


## difference in difference with baseline set to same point prevalence 
outputi10_3a <- clipdf(output_3a)
outputi10_3b <- clipdf(output_3b)
didi10_3 <- diffindiff(outputi10_3a, outputi10_3b)
logdidi10_3 <- logdiffindiff(outputi10_3a, outputi10_3b)

### Difference in differences of point prevalence
plotdid(outputi10_3a$I, outputi10_3b$I, didi10_3$I, "I")
plotdid(log(outputi10_3a$I), log(outputi10_3b$I), logdidi10_3$I, "log(I)")

### Difference in differences of R0 
plotdid(outputi10_3a$R0, outputi10_3b$R0, didi10_3$R0, "R0")

### Difference in differences of Rt
plotdid(outputi10_3a$Rt, outputi10_3b$Rt, didi10_3$Rt, "Rt")
plotdid(log(outputi10_3a$Rt), log(outputi10_3b$Rt), logdidi10_3$Rt, "log(Rt)")

### Difference in differences of cumulative incidence 
plotdid(outputi10_3a$cumincidence, outputi10_3b$cumincidence, didi10_3$cumincidence, 
        "Cumulative incidence")
plotdid(log(outputi10_3a$cumincidence), log(outputi10_3b$cumincidence), logdidi10_3$cumincidence, 
        "log(Cumulative incidence)")

### Difference in differences of incident cases
plotdid(outputi10_3a$incidentcases, outputi10_3b$incidentcases, didi10_3$incidentcases, 
        "Incident cases")
plotdid(log(outputi10_3a$incidentcases), log(outputi10_3b$incidentcases), logdidi10_3$incidentcases, 
        "log(Incident cases)")


## Scenario 4: Same parameters, time-varying betas, but different initial conditions 
 # (different population size and same proportions initially infected)

times_4 <- seq(0, 360, 1)
p_4 <- c(
  beta.0 = 1 / 15,
  gam = 1 / 30,
  amp = .3 / 15
)
u0_4a <- c(S =  898, I = 2, R = 100)
u0_4b <- c(S = 1347, I = 3, R = 150)

output_4a <- sir.model(times_4, u0_4a, p_4)
output_4b <- sir.model(times_4, u0_4b, p_4)
did_4 <- diffindiff(output_4a, output_4b)
logdid_4 <- logdiffindiff(output_4a, output_4b)

### Difference in differences of point prevalence
plotdid(output_4a$I, output_4b$I, did_4$I, "I")
plotdid(log(output_4a$I), log(output_4b$I), logdid_4$I, "log(I)")

### Difference in differences of R0 
plotdid(output_4a$R0, output_4b$R0, did_4$R0, "R0")

### Difference in differences of Rt
plotdid(output_4a$Rt, output_4b$Rt, did_4$Rt, "Rt")
plotdid(log(output_4a$Rt), log(output_4b$Rt), logdid_4$Rt, "log(Rt)")

### Difference in differences of cumulative incidence 
plotdid(output_4a$cumincidence, output_4b$cumincidence, did_4$cumincidence, 
  "Cumulative incidence")
plotdid(log(output_4a$cumincidence), log(output_4b$cumincidence), logdid_4$cumincidence, 
  "log(Cumulative incidence)")

### Difference in differences of incident cases
plotdid(output_4a$incidentcases, output_4b$incidentcases, did_4$incidentcases, 
  "Incident cases")
plotdid(log(output_4a$incidentcases), log(output_4b$incidentcases), logdid_4$incidentcases, 
  "log(Incident cases)")


## difference in difference with baseline set to same point prevalence 
outputi10_4a <- clipdf(output_4a)
outputi10_4b <- clipdf(output_4b)
didi10_4 <- diffindiff(outputi10_4a, outputi10_4b)
logdidi10_4 <- logdiffindiff(outputi10_4a, outputi10_4b)

### Difference in differences of point prevalence
plotdid(outputi10_4a$I, outputi10_4b$I, didi10_4$I, "I")
plotdid(log(outputi10_4a$I), log(outputi10_4b$I), logdidi10_4$I, "log(I)")

### Difference in differences of R0 
plotdid(outputi10_4a$R0, outputi10_4b$R0, didi10_4$R0, "R0")

### Difference in differences of Rt
plotdid(outputi10_4a$Rt, outputi10_4b$Rt, didi10_4$Rt, "Rt")
plotdid(log(outputi10_4a$Rt), log(outputi10_4b$Rt), logdidi10_4$Rt, "log(Rt)")

### Difference in differences of cumulative incidence 
plotdid(outputi10_4a$cumincidence, outputi10_4b$cumincidence, didi10_4$cumincidence, 
        "Cumulative incidence")
plotdid(log(outputi10_4a$cumincidence), log(outputi10_4b$cumincidence), logdidi10_4$cumincidence, 
        "log(Cumulative incidence)")

### Difference in differences of incident cases
plotdid(outputi10_4a$incidentcases, outputi10_4b$incidentcases, didi10_4$incidentcases, 
        "Incident cases")
plotdid(log(outputi10_4a$incidentcases), log(outputi10_4b$incidentcases), logdidi10_4$incidentcases, 
        "log(Incident cases)")


## Scenario 5: Degree of time-varying beta differs but other parameters the same,
 # same initial conditions 

times_5 <- seq(0, 360, 1)
p_5a <- c(
  beta.0 = 1 / 15,
  gam = 1 / 30,
  amp = .3 / 15
)
p_5b <- c(
  beta.0 = 1 / 15,
  gam = 1 / 30,
  amp = .6 / 15
)
u0_5 <- c(S = 899, I =  1, R = 100)

output_5a <- sir.model(times_5, u0_5, p_5a)
output_5b <- sir.model(times_5, u0_5, p_5b)
did_5 <- diffindiff(output_5a, output_5b)
logdid_5 <- logdiffindiff(output_5a, output_5b)

### Difference in differences of point prevalence
plotdid(output_5a$I, output_5b$I, did_5$I, "I")
plotdid(log(output_5a$I), log(output_5b$I), logdid_5$I, "log(I)")

### Difference in differences of R0 
plotdid(output_5a$R0, output_5b$R0, did_5$R0, "R0")

### Difference in differences of Rt
plotdid(output_5a$Rt, output_5b$Rt, did_5$Rt, "Rt")
plotdid(log(output_5a$Rt), log(output_5b$Rt), logdid_5$Rt, "log(Rt)")

### Difference in differences of cumulative incidence 
plotdid(output_5a$cumincidence, output_5b$cumincidence, did_5$cumincidence, 
  "Cumulative incidence")
plotdid(log(output_5a$cumincidence), log(output_5b$cumincidence), logdid_5$cumincidence, 
  "log(Cumulative incidence)")

### Difference in differences of incident cases
plotdid(output_5a$incidentcases, output_5b$incidentcases, did_5$incidentcases, 
  "Incident cases")
plotdid(log(output_5a$incidentcases), log(output_5b$incidentcases), logdid_5$incidentcases, 
  "log(Incident cases)")


## difference in difference with baseline set to same point prevalence 
outputi10_5a <- clipdf(output_5a)
outputi10_5b <- clipdf(output_5b)
didi10_5 <- diffindiff(outputi10_5a, outputi10_5b)
logdidi10_5 <- logdiffindiff(outputi10_5a, outputi10_5b)

### Difference in differences of point prevalence
plotdid(outputi10_5a$I, outputi10_5b$I, didi10_5$I, "I")
plotdid(log(outputi10_5a$I), log(outputi10_5b$I), logdidi10_5$I, "log(I)")

### Difference in differences of R0 
plotdid(outputi10_5a$R0, outputi10_5b$R0, didi10_5$R0, "R0")

### Difference in differences of Rt
plotdid(outputi10_5a$Rt, outputi10_5b$Rt, didi10_5$Rt, "Rt")
plotdid(log(outputi10_5a$Rt), log(outputi10_5b$Rt), logdidi10_5$Rt, "log(Rt)")

### Difference in differences of cumulative incidence 
plotdid(outputi10_5a$cumincidence, outputi10_5b$cumincidence, didi10_5$cumincidence, 
        "Cumulative incidence")
plotdid(log(outputi10_5a$cumincidence), log(outputi10_5b$cumincidence), logdidi10_5$cumincidence, 
        "log(Cumulative incidence)")

### Difference in differences of incident cases
plotdid(outputi10_5a$incidentcases, outputi10_5b$incidentcases, didi10_5$incidentcases, 
        "Incident cases")
plotdid(log(outputi10_5a$incidentcases), log(outputi10_5b$incidentcases), logdidi10_5$incidentcases, 
        "log(Incident cases)")


## Scenario 6: Beta parameters differ (not time-varying) but other parameters the same,
 # same initial conditions 

times_6 <- seq(0, 360, 1)
p_6a <- c(
  beta.0 = 1 / 15,
  gam = 1 / 30,
  amp = 0
)
p_6b <- c(
  beta.0 = 1.3 / 15,
  gam = 1 / 30,
  amp = 0
)
u0_6 <- c(S =  898, I = 2, R = 100)

output_6a <- sir.model(times_6, u0_6, p_6a)
output_6b <- sir.model(times_6, u0_6, p_6b)
did_6 <- diffindiff(output_6a, output_6b)
logdid_6 <- logdiffindiff(output_6a, output_6b)

### Difference in differences of point prevalence
plotdid(output_6a$I, output_6b$I, did_6$I, "I")
plotdid(log(output_6a$I), log(output_6b$I), logdid_6$I, "log(I)")

### Difference in differences of R0 
plotdid(output_6a$R0, output_6b$R0, did_6$R0, "R0")

### Difference in differences of Rt
plotdid(output_6a$Rt, output_6b$Rt, did_6$Rt, "Rt")
plotdid(log(output_6a$Rt), log(output_6b$Rt), logdid_6$Rt, "log(Rt)")

### Difference in differences of cumulative incidence 
plotdid(output_6a$cumincidence, output_6b$cumincidence, did_6$cumincidence, 
  "Cumulative incidence")
plotdid(log(output_6a$cumincidence), log(output_6b$cumincidence), logdid_6$cumincidence, 
  "log(Cumulative incidence)")

### Difference in differences of incident cases
plotdid(output_6a$incidentcases, output_6b$incidentcases, did_6$incidentcases, 
  "Incident cases")
plotdid(log(output_6a$incidentcases), log(output_6b$incidentcases), logdid_6$incidentcases, 
  "log(Incident cases)")


## difference in difference with baseline set to same point prevalence 
outputi10_6a <- clipdf(output_6a)
outputi10_6b <- clipdf(output_6b)
didi10_6 <- diffindiff(outputi10_6a, outputi10_6b)
logdidi10_6 <- logdiffindiff(outputi10_6a, outputi10_6b)

### Difference in differences of point prevalence
plotdid(outputi10_6a$I, outputi10_6b$I, didi10_6$I, "I")
plotdid(log(outputi10_6a$I), log(outputi10_6b$I), logdidi10_6$I, "log(I)")

### Difference in differences of R0 
plotdid(outputi10_6a$R0, outputi10_6b$R0, didi10_6$R0, "R0")

### Difference in differences of Rt
plotdid(outputi10_6a$Rt, outputi10_6b$Rt, didi10_6$Rt, "Rt")
plotdid(log(outputi10_6a$Rt), log(outputi10_6b$Rt), logdidi10_6$Rt, "log(Rt)")

### Difference in differences of cumulative incidence 
plotdid(outputi10_6a$cumincidence, outputi10_6b$cumincidence, didi10_6$cumincidence, 
        "Cumulative incidence")
plotdid(log(outputi10_6a$cumincidence), log(outputi10_6b$cumincidence), logdidi10_6$cumincidence, 
        "log(Cumulative incidence)")

### Difference in differences of incident cases
plotdid(outputi10_6a$incidentcases, outputi10_6b$incidentcases, didi10_6$incidentcases, 
        "Incident cases")
plotdid(log(outputi10_6a$incidentcases), log(outputi10_6b$incidentcases), logdidi10_6$incidentcases, 
        "log(Incident cases)")


## Scenario 7: Beta parameters differ, time-varying in the same proportion. Other 
 # parameters the same and same initial conditions 

times_7 <- seq(0, 360, 1)
p_7a <- c(
  beta.0 = 1 / 15,
  gam = 1 / 30,
  amp = .3 / 15
)
p_7b <- c(
  beta.0 = 1.3 / 15,
  gam = 1 / 30,
  amp = 1.3 * .3 / 15
)
u0_7 <- c(S =  898, I = 2, R = 100)

output_7a <- sir.model(times_7, u0_7, p_7a)
output_7b <- sir.model(times_7, u0_7, p_7b)
did_7 <- diffindiff(output_7a, output_7b)
logdid_7 <- logdiffindiff(output_7a, output_7b)

### Difference in differences of point prevalence
plotdid(output_7a$I, output_7b$I, did_7$I, "I")
plotdid(log(output_7a$I), log(output_7b$I), logdid_7$I, "log(I)")

### Difference in differences of R0 
plotdid(output_7a$R0, output_7b$R0, did_7$R0, "R0")

### Difference in differences of Rt
plotdid(output_7a$Rt, output_7b$Rt, did_7$Rt, "Rt")
plotdid(log(output_7a$Rt), log(output_7b$Rt), logdid_7$Rt, "log(Rt)")

### Difference in differences of cumulative incidence 
plotdid(output_7a$cumincidence, output_7b$cumincidence, did_7$cumincidence, 
  "Cumulative incidence")
plotdid(log(output_7a$cumincidence), log(output_7b$cumincidence), logdid_7$cumincidence, 
  "log(Cumulative incidence)")

### Difference in differences of incident cases
plotdid(output_7a$incidentcases, output_7b$incidentcases, did_7$incidentcases, 
  "Incident cases")
plotdid(log(output_7a$incidentcases), log(output_7b$incidentcases), logdid_7$incidentcases, 
  "log(Incident cases)")

## difference in difference with baseline set to same point prevalence 
outputi10_7a <- clipdf(output_7a)
outputi10_7b <- clipdf(output_7b)
didi10_7 <- diffindiff(outputi10_7a, outputi10_7b)
logdidi10_7 <- logdiffindiff(outputi10_7a, outputi10_7b)

### Difference in differences of point prevalence
plotdid(outputi10_7a$I, outputi10_7b$I, didi10_7$I, "I")
plotdid(log(outputi10_7a$I), log(outputi10_7b$I), logdidi10_7$I, "log(I)")

### Difference in differences of R0 
plotdid(outputi10_7a$R0, outputi10_7b$R0, didi10_7$R0, "R0")

### Difference in differences of Rt
plotdid(outputi10_7a$Rt, outputi10_7b$Rt, didi10_7$Rt, "Rt")
plotdid(log(outputi10_7a$Rt), log(outputi10_7b$Rt), logdidi10_7$Rt, "log(Rt)")

### Difference in differences of cumulative incidence 
plotdid(outputi10_7a$cumincidence, outputi10_7b$cumincidence, didi10_7$cumincidence, 
        "Cumulative incidence")
plotdid(log(outputi10_7a$cumincidence), log(outputi10_7b$cumincidence), logdidi10_7$cumincidence, 
        "log(Cumulative incidence)")

### Difference in differences of incident cases
plotdid(outputi10_7a$incidentcases, outputi10_7b$incidentcases, didi10_7$incidentcases, 
        "Incident cases")
plotdid(log(outputi10_7a$incidentcases), log(outputi10_7b$incidentcases), logdidi10_7$incidentcases, 
        "log(Incident cases)")
```